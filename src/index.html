<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Abyss Overlay</title>
    <script src="../src/i18n/language.js"></script>
    <script src="../src/index.js"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/nano.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';"/>
</head>
<body>
    <div id="base">
        <div class="menu">
            <h1 class="menuitem">ABYSS</h1>
            <!--add tooltips for buttons-->
            <img src="" id="clientimg">
            <button name="Discord Server" class="menuitem tabsbuttons" id="discord"></button>
            <button name="Information" class="menuitem tabsbuttons" id="info" style="width: 31px;"></button>
            <button name="Session" class="menuitem tabsbuttons" id="session" style="width: 31px;"></button>
            <button name="Music" class="menuitem tabsbuttons" id="music" style="width: 31px;"></button>
            <button name="Settings" class="menuitem tabsbuttons" id="settings"></button>
            <button name="Update" class="menuitem" id="update"></button>
            <button name="Quit" class="menuitem" id="quit"></button>
            <button name="Minimize" class="menuitem" id="minimize"></button>
            <button name="Show" class="menuitem" id="show"></button>
            <img id="musicvisualizer" src="../assets/musicvisualizer.gif">
            <!-- <button name="pp" class="menuitem" id="pp"></button> -->
            <!-- <button name="ppp" class="menuitem" id="ppp"></button> -->
        </div>

        <div id="settingsdiv">
            <div class="settings-container">
                <div class="setting-group" style="z-index: 2;">
                    <!-- <p>统计游戏模式 by:lroj</p> -->
                    <p>{{ $t('message.gamemode', { id: 'lroj' }) }}</p>
                    <div class="custom-select-wrapper" id="gamemodebtn" style="filter: none;">
                        <div class="custom-select">
                            <div class="custom-select_trigger"><span style="text-align: center; width: 85%;">Select</span>
                                <div class="arrow"></div>
                            </div>
                            <div class="custom-options">
                                <span class="custom-option" id="bw">{{ $t('message.bw'}) }}</span>
                                <span class="custom-option" id="sw">{{ $t('message.sw'}) }}</span>
                                <span class="custom-option" id="duels">{{ $t('message.duels'}) }}</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="setting-group" style="z-index: 1;">
                    <p>起床战争游戏模式</p>
                    <div class="custom-select-wrapper" id="gmbtn" style="filter: none;">
                        <div class="custom-select">
                            <div class="custom-select_trigger"><span style="text-align: center; width: 85%;">Select</span>
                                <div class="arrow"></div>
                            </div>
                            <div class="custom-options">
                                <span class="custom-option" id="overall">Overall</span>
                                <span class="custom-option" id="solos">Solos</span>
                                <span class="custom-option" id="doubles">Doubles</span>
                                <span class="custom-option" id="threes">Threes</span>
                                <span class="custom-option" id="fours">Fours</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="setting-group">
                    <p>自动who [测试版]</p>
                    <label class="switch">
                        <input type="checkbox" id="whobtn">
                        <span class="slider round"></span>
                    </label>
                    <span>覆盖将自动为您在聊天中键入“/who”。加入大厅后，等待几秒钟再触摸键盘，以免干扰autowho。[AYOR]</span>
                </div>
                <div class="setting-group">
                    <p>游戏开始通知</p>
                    <label class="switch">
                        <input class="settingspage" type="checkbox" id="notifsbtn" checked>
                        <span class="slider round"></span>
                    </label>
                    <span>游戏开始时收到通知。您可以在大厅随意离开，不必担心游戏何时开始！</span>
                </div>
                <div class="setting-group">
                    <p>自动收缩/取消收缩</p>
                    <label class="switch">
                        <input class="settingspage" type="checkbox" id="shrinkbtn" checked>
                        <span class="slider round"></span>
                    </label>
                    <span>在关键事件中，覆盖图会自动在缩小和完全显示模式之间切换，这样当你专注于游戏时，你就不会错过任何重要的数据变化！当你的游戏开始时它会缩小，当玩家加入时它会打开。</span>
                </div>
                <div class="setting-group">
                    <p>公会标签</p>
                    <label class="switch">
                        <input class="settingspage" type="checkbox" id="gtagbtn" checked>
                        <span class="slider round"></span>
                    </label>
                    <span>在玩家名字旁边显示公会标签。每个玩家多调用1次Hypixel API。</span>
                </div>
                <div class="setting-group">
                    <p>外部玩家</p>
                    <label class="switch">
                        <input class="settingspage" type="checkbox" id="callbtn" checked>
                        <span class="slider round"></span>
                    </label>
                    <span>显示在聊天中输入您的名字的玩家的统计数据；这些玩家会带着标签出现。有助于在大厅中寻找派对。同时显示向您发送聚会和好友请求的玩家。</span>
                </div>
                <div class="setting-group">
                    <p>Discord Rich Presence</p>
                    <label class="switch">
                        <input class="settingspage" type="checkbox" id="rpcbtn" checked>
                        <span class="slider round"></span>
                    </label>
                    <span>在你的不和谐状态中炫耀你的叠加和统计！</span>
                </div>
                <div class="setting-group" style="z-index: 2;">
                    <p>不和谐RPC统计</p>
                    <div class="custom-select-wrapper" id="rpcStats" style="width: 45%">
                        <div class="custom-select">
                            <div class="custom-select_trigger"><span style="text-align: center; width: 85%;">Select</span>
                                <div class="arrow"></div>
                            </div>
                            <div class="custom-options">
                                <span class="custom-option" id="rpcSession">会话统计</span>
                                <span class="custom-option" id="rpcOverall">总体统计</span>
                                <span class="custom-option" id="rpcNo">隐藏统计</span>
                            </div>
                        </div>
                    </div>
                    <span>选择在你的不和谐状态中要展示的属性。</span>
                </div>
                <div class="setting-group">
                    <p>Hypixel API密钥</p>
                    <input type="text" id="api_key" name="Hypixel API Key" maxlength="36" size="36" placeholder="Click to paste API key" style="position: absolute; top: 4px; right: 3px;">
                </div>
                <div class="setting-group">
                    <p>更改客户</p>
                    <div class="custom-select-wrapper" id="changeclient" style="width: 240px">
                        <div class="custom-select">
                            <div class="custom-select_trigger" style="text-align: center;">选择客户端</div>
                        </div>
                    </div>
                    <span>更改覆盖检测到的《我的世界》客户端。<br>将重新开始叠加！</span>
                </div>
                <div class="setting-group">
                    <p>自定义聊天日志文件</p>
                    <div class="custom-select-wrapper" id="changelogpath" style="width: 260px">
                        <div class="custom-select">
                            <div class="custom-select_trigger" style="text-align: center;">选择日志文件</div>
                        </div>
                    </div>
                    <span>更改客户端的聊天日志文件路径。选择正确的latest.log文件，您的客户端会将其聊天日志写入该文件。<br>将重新开始叠加！</span>
                </div>
                <div class="setting-group">
                    <p>覆盖主题</p>
                    <div style="position: absolute; top: 1px; right: 1px; width: 200px;">
                        <div style="overflow: visible; height: 35px; width: 30px; z-index: 1;">
                            <div id="color-picker"></div>
                        </div>
                        <button name="Revert" id="revertcolor"></button>
                    </div>
                </div>
            </div>
        </div>

        <div id="infodiv">
            <p class="infopage" style="width: 100%; margin-left: 2px; text-align: left; color: var(--primaryColor);">➤Stats Coloring Key:</p>
            <div class="infopage" style="background: #AAAAAA; color: #555555; width: 16%; margin-left: 5px;">坏</div>
            <div class="infopage" style="background: #FFFFFF; color: #AAAAAA; width: 16%;">还行</div>
            <div class="infopage" style="background: #FFAA00; color: #FFFF55; width: 16%;">DECENT</div>
            <div class="infopage" style="background: #00AAAA; color: #55FFFF; width: 16%;">好</div>
            <div class="infopage" style="background: #AA0000; color: #FF5555; width: 16%;">传说</div>
            <div class="infopage" style="background: #AA00AA; color: #FF55FF; width: 16%;">神</div>
            <p class="infopage" style="width: 100%; margin-left: 2px; margin-top: 20px; text-align: left; color: var(--primaryColor);">➤标签:</p>
            <div class="infopage" style="color: #F3FF00; width: 16%; line-height: 23px; margin-left: 5px;">NICK - nick 玩家</div>
            <div class="infopage" style="color: #FF5555; width: 16%; line-height: 23px;">SNPR - 潜在的狙击手</div>
            <div class="infopage" style="color: #5555FF; width: 16%; line-height: 23px;">ALT - 潜在的替代项</div>
            <div class="infopage" style="color: #FFB900; width: 20%; line-height: 23px;">PRTY - 可能在组队中</div>
            <div class="infopage" style="color: #03C800; width: 20%; line-height: 23px;">P - 在您的组队中（仅限大厅）</div>
            <div class="infopage" style="color: #00C2A2; width: 16%; line-height: 23px;">CALL - 在大厅中输入您的 IGN</div>
            <div class="infopage" style="color: #37B836; width: 20%; line-height: 23px;">PREQ - 邀请你参加他们的组队</div>
            <div class="infopage" style="color: #D6D600; width: 20%; line-height: 23px;">FREQ - 向您发送了加好友请求</div>
            <div class="infopage" style="color: #36C700; width: 20%; line-height: 23px;">GLD - 公会列表中的玩家</div>
            <div class="infopage" style="color: #D071DA; width: 20%; line-height: 23px;"><img src="https://i2.wp.com/erisly.com/assets/img/premium/boost.def36ba.png" width="25" height="25"> - Discord server booster</div>
            <div class="infopage" style="color: #00FF00; width: 20%; line-height: 23px;"><span style="font-size: 26px">✔</span> - 已验证（加入不和谐服务器）</div>
            <div class="infopage" style="color: red; width: 20%; line-height: 23px;"><span style="font-size: 26px">❤</span> - 捐赠（加入不和谐服务器）</div>
            <p class="infopage" style="width: 100%; text-align: left; margin-left: 2px; margin-top: 25px; color: var(--primaryColor);">➤隐藏/显示：按 Ctrl+Shift+A</p>
            <p class="infopage" style="width: 100%; margin-left: 2px; margin-top: 20px; text-align: left; color: var(--primaryColor);">➤如何使用：</p>
            <p class="infopage" style="width: 100%; font-size: 15px; margin-left: 2px; text-align: left;">✧在游戏大厅中键入“/who”以使所有玩家在覆盖层上注册（可能需要几秒钟）。 ✧推荐：将叠加层放置在屏幕的左上角或右上角，让免提功能控制叠加层大小（阅读下文）</p>
            <p class="infopage" style="width: 100%; margin-left: 2px; margin-top: 20px; text-align: left; color: var(--primaryColor);">➤特征：</p>
            <p class="infopage" style="width: 100%; font-size: 15px; margin-left: 2px; text-align: left;">✧可通过拖动边缘调整大小。 ✧免提：游戏开始时自动缩小到标题栏，大厅中玩家发生变化时自动取消缩小，您可以使用右上角的绿色箭头切换此模式</p>
            <p class="infopage" style="width: 100%; margin-left: 2px; margin-top: 20px; text-align: left; color: var(--primaryColor);">➤会话统计信息：</p>
            <p class="infopage" style="width: 100%; font-size: 15px; margin-left: 2px; text-align: left;">✧单击标题栏上的时钟按钮以查看您的会话统计信息，以及自打开叠加层以来统计信息的变化。 ✧执行 /api new 将重置您的会话统计信息</p>
            <p class="infopage" style="width: 100%; margin-left: 2px; margin-top: 20px; text-align: left; color: var(--primaryColor);">➤指令：</p>
            <p class="infopage" style="width: 100%; font-size: 15px; margin-left: 2px; text-align: left;">✧“/w cl”将清除叠加层上的玩家。 ✧“/w！[IGN]”将显示您输入的玩家的[IGN]的统计数据 (例如: "/w !OhChit")</p>
            <p class="infopage" style="width: 100%; margin-left: 2px; margin-top: 20px; text-align: left; color: var(--primaryColor);">➤PS:</p>
            <p class="infopage" style="width: 100%; font-size: 15px; margin-left: 2px; text-align: left;">✧此覆盖处于早期阶段，因此预计会出现错误。它是由Chit（OhChit）制作的。这是我第一次制作应用程序，所以请不要期望太多。请加入 Discord 并向我发送任何错误或建议的消息！</p>
        </div>

        <div id="sessiondiv">
            <img id="sessionavatar" style="position: absolute; right: 10px; margin-top: 10px; filter: drop-shadow(2px 2px rgb(0, 0, 0));">
            <p id="sessiontitle" class="sessionpage" style="font-size: 20px; position: absolute; width: 100%; color: var(--primaryColor);">Session Stats Unavailable</p>
            <p id="sessionign" class="sessionpage" style="font-size: 25px; margin-top: 40px; margin-left: 10px; text-align: left; display: block;">--</p>
            <p id="sessionhtml" class="sessionpage" style="margin-top: 20px; margin-left: 10px; text-align: left;"><span style="color: red">ERROR LOADING STATS<br>CHECK YOUR API KEY</span></p>
            <p id="sessiontime" class="sessionpage" style="right: 10px; bottom: 5px; position: absolute; font-size: 12px; text-align: right;">--</p>
        </div>

        <div id="musicdiv" style="filter: drop-shadow(2px 2px rgb(0, 0, 0));">
            <p id="sessiontitle" class="rainbow" style="font-size: 22px; margin-top: 0; position: relative; text-align: center; width: 100%;">Overlay Music Party</p>
            <p class="musicintro" style="text-align: center; font-size: 20px; color: rgb(174, 50, 205);"><b>Listen to music together with your party! They can all play songs and control the music vibe together</b></p>
            <p class="musicintro" style="text-align: left; font-size: 17px; margin: 5px; color: #1d6cff;"><span style="font-size: 19; text-decoration: underline;"><b>Party chat usage commands:</b></span><br>• !play [song name] - Queue a song<br>• !remove [#] - Remove song # in queue<br>• !skip - Skips the current song<br>• !loop - Loop the queue<br>• !clear - Clear the entire queue</p>
            <p class="musicintro" id="unlinked" style="text-align: left; font-size: 20px; margin: 5px; color: red; text-decoration: underline; display: none;"><b>ERROR: YOUR MC ACCOUNT IS NOT LINKED TO THE BOT IN THE DISCORD SERVER. Click the Discord button on the top to join the server and use the command ".link [IGN]"" in #bot-commands and try again</b></p>
            <p class="musicintro" id="nomusicbots" style="text-align: left; font-size: 20px; margin: 5px; color: red; text-decoration: underline; display: none;"><b>ERROR: NO MUSIC BOTS AVAILABLE. All the music bots are currently being used currently. Try again later</b></p>
            <div class="musicintro" style="text-align: center; margin-top: 15px; margin-bottom: 15px;"><button class="musicintro" id="startmusic">Start Music Party</button></div>
            <p class="musicintro" style="text-align: left; font-size: 18px; margin: 5px; color: rgb(187, 9, 9);"><span style="text-decoration: underline;"><b>NOTE:</b></span> Your MC account must first be linked to the bot in the Abyss Overlay Discord server! Your private VC will be created in that server; you can join it and drag your party members in.</p>

            <div class="musicplaying" style="width: 100%">
                <button name="EndMusic" class="musicplaying" id="endmusic">End Session</button>
                <p class="musicplaying" style="color: rgb(112, 112, 112); height: 14px; font-size: 14px; line-height: 14px; margin: 0 0 1px 10%;">NOW PLAYING</p>
                <p class="musicplaying" id="songname" style="color: var(--primaryColor); height: 22px; width: 80%; font-size: 19px; line-height: 19px; margin: 0 0 1px 10%; white-space: nowrap; overflow: hidden;">//</p>
                <div class="musicplaying" style="width: 90%; height: 10px; margin: 0 auto; overflow: visible; font-size: 0; margin-bottom: 5px;">
                    <p id="currentsongtime" class="songtimer" style="text-align: right; direction: rtl;">0:00</p>
                    <div style="display: inline-block; width: 89%; height: 10px; background-color: rgb(134, 134, 134); margin: 0 0.5% 0 0.5%; border-radius: 10px; overflow: hidden;"><div id="musicprogress"></div></div>
                    <p id="fullsongtime" class="songtimer" style="text-align: left; direction: ltr;">0:00</p>
                </div>
                <button name="Loop" class="musicbutton musicplaying" id="loopmusic" style="background-image: url(../assets/m_loop.png); margin-left: 40%;"></button>
                <button name="Play" class="musicbutton musicplaying" id="playmusic" style="background-image: url(../assets/m_play.png);"></button>
                <button name="Next" class="musicbutton musicplaying" id="skipmusic" style="background-image: url(../assets/m_skip.png);"></button>
    
                <div class="musicplaying" style="height: 280px; width: 60%; border: solid rgba(136, 136, 136, 0.74); border-width: 1px; border-radius: 10px; background-color: rgba(2, 2, 2, 0.199); margin: auto; margin-bottom: 5px; overflow: hidden;">
                    <p style="height: 10%; width: 100%; margin: 0; text-align: center; letter-spacing: 1px; background-color: rgba(145, 145, 145, 0.26); filter: drop-shadow(0);">QUEUE<span id="queuenum" style="height: 100%; width: 0%; overflow: visible; float: right; text-align: right; right: 2px; direction: rtl; font-size: 15px; vertical-align: middle; color: rgb(131, 131, 131);">0</span></p>
                    <div style="height: 100%; overflow-x: hidden; overflow-y: auto;">
                        <ul id="queuediv" style="width: 100%; margin: 0; padding: 0; list-style-type: none; font-family: Minecraftia; font-size: 0;">
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <p class="startup" style="color: var(--primaryColor)">选择您的客户:</p>
        <button class="clientbutton" id="badlion" style="margin-left: 2.5%;">狮子端</button>
        <button class="clientbutton" id="lunar">月亮端 1.8.9</button>
        <button class="clientbutton" id="vanilla">Vanilla/Forge</button>
        <button class="clientbutton" id="pvplounge" style="margin-left: 2.5%;">PvP Lounge</button>
        <button class="clientbutton" id="labymod">Laby Mod</button>
        <button class="clientbutton" id="feather">Feather</button>
        <!-- <p class="clientbutton updatenotif" style="color: red; display: none; width: 100%; word-wrap: break-word; white-space: normal; text-align: center;">THIS VERSION IS OUT OF DATE. UPDATE BY JOINING THE DISCORD OR CLICKING THE RED UPDATE BUTTON</p> -->
        <!--<iframe src="https://discord.com/widget?id=822639649247592528&theme=dark" width="350" height="340" allowtransparency="true" frameborder="0" sandbox="allow-same-origin allow-scripts"></iframe>-->
        <div id="titles">
            <p class="titleitems" style="width: 46.75%; padding-left: 2px;" id="playertitle">玩家</p>
            <p class="titleitems" style="width: 6%;">TAG</p>
            <p class="titleitems" id="ws_nwl" style="width: 6.5%;">WS</p>
            <p class="titleitems" id="kdr" style="width: 9.5%;">FKDR</p>
            <p class="titleitems" style="width: 7%;">WLR</p>
            <!--<p class="titleitems" style="width: 7.25%;">BBLR</p>-->
            <p class="titleitems" id="kills" style="width: 11.25%;">FINALS</p>
            <p class="titleitems" style="width: 9%;/*background-color: rgba(238, 130, 238, 0.644);*/">WINS</p>
        </div>
        <div id="indexdiv">
            <ul class="indexes" id="ign" style="width: 46.75%; text-align: left; padding-left: 2px; list-style-type: none;"></ul>
            <ul class="indexes" id="tag" style="width: 6%; overflow: visible;"></ul>
            <ul class="indexes" id="ws" style="width: 6.5%;"></ul>
            <ul class="indexes" id="fkdr" style="width: 9.5%;"></ul>
            <ul class="indexes" id="wlr" style="width: 7%;"></ul>
            <!--<ul class="indexes" id="bblr" style="width: 7.25%;"></ul>-->
            <ul class="indexes" id="finals" style="width: 11.25%;"></ul>
            <ul class="indexes" id="wins" style="width: 9%;"></ul>
        </div>

        <div id="changelog">
            <p id="changelogVersion" style="width: 100%; height: 37px; margin: 0; padding: 0; background-color: rgb(75, 75, 75); text-align: center; font-size: 20px; color: var(--primaryColor);">Changelog</p>
            <p id="changelogClose">×</p>
            <p style="height: calc(100% - 37px); margin: 0; margin-left: 5px; padding: 0; overflow-y: auto; color: rgb(179, 179, 179);">
                - <b>Added popup stats.</b> Hover over a player's name to see more detailed stats<br><br>
                - <b>Revamped settings page.</b> Settings page is prettier compared to the mess it was before<br><br>
                - <b>Fixed CALL IGN.</b> Fixed the issue where people who type your name in chat would tend to not show up on the overlay with the CALL tag<br><br>
                - <b>Fixed error on startup during API key verification.</b> Fixed the issue where an error would be thrown on startup due to user being null. Issue was the result of Mojang API removing their UUID->names endpoint<br><br>
                - <b>Fixed case-sensitive IGNs</b> IGNs in chat no longer have to be case sensitive
            </p>
        </div>
    </div>
</body>
</html>
